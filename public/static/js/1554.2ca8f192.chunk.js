"use strict";(self.webpackChunkabokisub_recovered=self.webpackChunkabokisub_recovered||[]).push([[1554],{24753(e,t,r){r.d(t,{A:()=>f});var s=r(89379),a=r(80045),o=r(90620),l=r.n(o),n=r(96446),i=r(85865),c=r(88446),d=r(35475),p=r(22698),u=r(70579);const x=["links","activeLast"];function h(e){let{links:t,activeLast:r=!1}=e,o=(0,a.A)(e,x);const l=t[t.length-1].name,c=t.map(e=>(0,u.jsx)(m,{link:e},e.name)),d=t.map(e=>(0,u.jsx)("div",{children:e.name!==l?(0,u.jsx)(m,{link:e}):(0,u.jsx)(i.A,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:l})},e.name));return(0,u.jsx)(p.A,(0,s.A)((0,s.A)({separator:(0,u.jsx)(n.A,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})},o),{},{children:r?c:d}))}function m(e){let{link:t}=e;const{href:r,name:s,icon:a}=t;return(0,u.jsxs)(c.A,{variant:"body2",component:d.N_,to:r||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[a&&(0,u.jsx)(n.A,{sx:{mr:1,"& svg":{width:20,height:20}},children:a}),s]},s)}const A=["links","action","heading","moreLink","sx"];function f(e){let{links:t,action:r,heading:o,moreLink:d=[],sx:p}=e,x=(0,a.A)(e,A);return(0,u.jsxs)(n.A,{sx:(0,s.A)({mb:5},p),children:[(0,u.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,u.jsxs)(n.A,{sx:{flexGrow:1},children:[(0,u.jsx)(i.A,{variant:"h4",gutterBottom:!0,children:o}),(0,u.jsx)(h,(0,s.A)({links:t},x))]}),r&&(0,u.jsx)(n.A,{sx:{flexShrink:0},children:r})]}),(0,u.jsx)(n.A,{sx:{mt:2},children:l()(d)?(0,u.jsx)(c.A,{href:d,target:"_blank",rel:"noopener",variant:"body2",children:d}):d.map(e=>(0,u.jsx)(c.A,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e))})]})}},91554(e,t,r){r.r(t),r.d(t,{default:()=>R});var s=r(19252),a=r(48407),o=r(11737),l=r(19838),n=r(24753),i=r(89379),c=r(65043),d=r(73023),p=r.n(d),u=r(96446),x=r(81637),h=r(68903),m=r(67254),A=r(12110),f=r(53193),y=r(51292),g=r(85865),v=r(78977),j=r(57972),b=r(63336),k=r(17392),w=r(74605),S=r(14256),C=r(43845),_=r(43608),I=r(10977),P=r(94329),z=r(84473),B=r(70579);function L(e){let{setting:t}=e;const[r,s]=(0,c.useState)(!0),[a,o]=(0,c.useState)(!1),[l,n]=(0,c.useState)([]),[d,L]=(0,c.useState)(""),[M,R]=(0,c.useState)(null),V=window.localStorage.getItem("accessToken"),E={xixapay_palmpay:"Xixapay (Palmpay)",xixapay_kolomonie:"Xixapay (Kolomonie)",monnify_moniepoint:"Monnify (Moniepoint)",paystack_wema:"Paystack (Wema)",paymentpoint_palmpay:"PaymentPoint (Palmpay)"};(0,c.useEffect)(()=>{N()},[]);const N=async()=>{try{s(!0);const[e,t]=await Promise.all([z.A.get("/api/secure/virtualaccounts/locks/".concat(V,"/habukhan/secure")),z.A.get("/api/secure/virtualaccounts/status")]);"success"===e.data.status&&n(e.data.locks),"success"===t.data.status&&L(t.data.default_provider_key||"xixapay_palmpay")}catch(e){console.error("Error fetching virtual account status:",e),R("Failed to load settings. Please try again.")}finally{s(!1)}},D=(e,t)=>{const r=[...l],s=r[e];r.splice(e,1),r.splice(e+t,0,s);const a=r.map((e,t)=>(0,i.A)((0,i.A)({},e),{},{sort_order:t}));n(a)};return r?(0,B.jsx)(u.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:(0,B.jsx)(x.A,{})}):(0,B.jsx)(h.Ay,{container:!0,spacing:3,children:(0,B.jsxs)(h.Ay,{item:!0,xs:12,md:10,children:[M&&(0,B.jsx)(m.A,{severity:"error",sx:{mb:3},children:M}),(0,B.jsxs)(A.A,{sx:{p:3},children:[(0,B.jsxs)(f.A,{component:"fieldset",fullWidth:!0,children:[(0,B.jsx)(y.A,{component:"legend",children:(0,B.jsxs)(u.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,B.jsxs)(u.A,{children:[(0,B.jsx)(g.A,{variant:"h6",children:"Virtual Account Configuration"}),(0,B.jsx)(g.A,{variant:"body2",color:"text.secondary",children:"Select default provider and arrange display order."})]}),(0,B.jsx)(v.A,{variant:"contained",startIcon:(0,B.jsx)(P.A,{}),onClick:async()=>{try{o(!0),await z.A.post("/api/secure/virtualaccounts/locks/reorder/".concat(V,"/habukhan/secure"),{locks:l}),p()("Success","Provider order updated successfully","success")}catch(e){console.error("Error updating order:",e),p()("Error","Failed to save order","error")}finally{o(!1)}},disabled:a,children:"Save Order"})]})}),(0,B.jsx)(j.A,{value:d,onChange:async e=>{const t=e.target.value,[r,s]=t.split("_"),a=l.find(e=>e.provider===r&&e.account_type===s);if(a&&a.is_locked)p()("Error","Cannot set a locked provider as default. Please unlock it first.","error");else try{o(!0),await z.A.post("/api/secure/selection/virtualaccounts/".concat(V,"/habukhan/secure"),{default_provider:r,default_account_type:s}),L(t),p()("Success","Default provider updated successfully","success")}catch(n){console.error("Error setting default provider:",n),p()("Error","Failed to set default provider","error")}finally{o(!1)}},children:(0,B.jsx)(h.Ay,{container:!0,spacing:2,children:l.map((e,t)=>{const r="".concat(e.provider,"_").concat(e.account_type),s=E[r]||"".concat(e.provider," (").concat(e.account_type,")");return(0,B.jsx)(h.Ay,{item:!0,xs:12,children:(0,B.jsxs)(b.A,{variant:"outlined",sx:{p:2,display:"flex",alignItems:"center",bgcolor:d===r?"action.selected":"transparent",borderColor:d===r?"primary.main":"divider"},children:[(0,B.jsxs)(u.A,{sx:{display:"flex",flexDirection:"column",mr:2},children:[(0,B.jsx)(k.A,{size:"small",disabled:0===t||a,onClick:()=>D(t,-1),children:(0,B.jsx)(_.A,{fontSize:"small"})}),(0,B.jsx)(k.A,{size:"small",disabled:t===l.length-1||a,onClick:()=>D(t,1),children:(0,B.jsx)(I.A,{fontSize:"small"})})]}),(0,B.jsx)(w.A,{value:r,control:(0,B.jsx)(S.A,{disabled:a||Boolean(e.is_locked)}),label:(0,B.jsxs)(u.A,{sx:{ml:1},children:[(0,B.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,B.jsx)(g.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:s}),Boolean(e.is_locked)&&(0,B.jsx)(C.A,{label:"Locked",size:"small",color:"error",variant:"outlined"}),d===r&&(0,B.jsx)(C.A,{label:"Default",size:"small",color:"primary"})]}),(0,B.jsxs)(g.A,{variant:"caption",color:"text.secondary",children:["Priority: ",t+1]})]}),sx:{flex:1,m:0}})]})},e.id||r)})})})]}),(0,B.jsx)(m.A,{severity:"info",sx:{mt:3},children:(0,B.jsxs)(g.A,{variant:"body2",children:[(0,B.jsx)("strong",{children:"Note:"}),(0,B.jsx)("br",{}),"- The ",(0,B.jsx)("strong",{children:"Default"})," provider is the primary account shown to users.",(0,B.jsx)("br",{}),"- Use the ",(0,B.jsx)("strong",{children:"Arrows"})," to reorder. This order will be used where multiple accounts are listed.",(0,B.jsx)("br",{}),"- Click ",(0,B.jsx)("strong",{children:"Save Order"})," to persist changes."]})})]})]})})}var M=r(30342);function R(){const{themeStretch:e}=(0,o.A)(),{setting:t}=(0,M.A)();return(0,B.jsx)(l.A,{title:"Admin || Virtual Account Selection",children:(0,B.jsxs)(s.A,{maxWidth:!e&&"lg",children:[(0,B.jsx)(n.A,{heading:"Virtual Account Default Selection",links:[{name:"Dashboard",href:a.mB.root},{name:"Virtual Account Selection"}]}),(0,B.jsx)(L,{setting:null===t||void 0===t?void 0:t.setting})]})})}},10977(e,t,r){var s=r(24994);t.A=void 0;var a=s(r(40039)),o=r(70579);t.A=(0,a.default)((0,o.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward")},43608(e,t,r){var s=r(24994);t.A=void 0;var a=s(r(40039)),o=r(70579);t.A=(0,a.default)((0,o.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward")},94329(e,t,r){var s=r(24994);t.A=void 0;var a=s(r(40039)),o=r(70579);t.A=(0,a.default)((0,o.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},22698(e,t,r){r.d(t,{A:()=>z});var s=r(58168),a=r(98587),o=r(65043),l=r(58387),n=r(98610),i=r(88092),c=r(34535),d=r(98206),p=r(85865),u=r(67266),x=r(66734),h=r(70579);const m=(0,x.A)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var A=r(72949);const f=["slots","slotProps"],y=(0,c.Ay)(A.A,{name:"MuiBreadcrumbCollapsed"})(e=>{let{theme:t}=e;return(0,s.A)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,s.A)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,s.A)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,u.tL)(t.palette.grey[200],.12)}:{backgroundColor:(0,u.tL)(t.palette.grey[600],.12)})})}),g=(0,c.Ay)(m)({width:24,height:16});const v=function(e){const{slots:t={},slotProps:r={}}=e,o=(0,a.A)(e,f),l=e;return(0,h.jsx)("li",{children:(0,h.jsx)(y,(0,s.A)({focusRipple:!0},o,{ownerState:l,children:(0,h.jsx)(g,(0,s.A)({as:t.CollapsedIcon,ownerState:l},r.collapsedIcon))}))})};var j=r(92532),b=r(72372);function k(e){return(0,b.Ay)("MuiBreadcrumbs",e)}const w=(0,j.A)("MuiBreadcrumbs",["root","ol","li","separator"]),S=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C=(0,c.Ay)(p.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(w.li)]:t.li},t.root]})({}),_=(0,c.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,c.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function P(e,t,r,s){return e.reduce((a,o,l)=>(l<e.length-1?a=a.concat(o,(0,h.jsx)(I,{"aria-hidden":!0,className:t,ownerState:s,children:r},"separator-".concat(l))):a.push(o),a),[])}const z=o.forwardRef(function(e,t){const r=(0,d.b)({props:e,name:"MuiBreadcrumbs"}),{children:c,className:p,component:u="nav",slots:x={},slotProps:m={},expandText:A="Show path",itemsAfterCollapse:f=1,itemsBeforeCollapse:y=1,maxItems:g=8,separator:j="/"}=r,b=(0,a.A)(r,S),[w,I]=o.useState(!1),z=(0,s.A)({},r,{component:u,expanded:w,expandText:A,itemsAfterCollapse:f,itemsBeforeCollapse:y,maxItems:g,separator:j}),B=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},k,t)})(z),L=(0,i.A)({elementType:x.CollapsedIcon,externalSlotProps:m.collapsedIcon,ownerState:z}),M=o.useRef(null),R=o.Children.toArray(c).filter(e=>o.isValidElement(e)).map((e,t)=>(0,h.jsx)("li",{className:B.li,children:e},"child-".concat(t)));return(0,h.jsx)(C,(0,s.A)({ref:t,component:u,color:"text.secondary",className:(0,l.A)(B.root,p),ownerState:z},b,{children:(0,h.jsx)(_,{className:B.ol,ref:M,ownerState:z,children:P(w||g&&R.length<=g?R:(e=>y+f>=e.length?e:[...e.slice(0,y),(0,h.jsx)(v,{"aria-label":A,slots:{CollapsedIcon:x.CollapsedIcon},slotProps:{collapsedIcon:L},onClick:()=>{I(!0);const e=M.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-f,e.length)])(R),B.separator,j,z)})}))})}}]);
//# sourceMappingURL=1554.2ca8f192.chunk.js.map